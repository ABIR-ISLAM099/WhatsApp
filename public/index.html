<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IMRAN BOT â€” Pro Linker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --g:#25D366;--g2:#00e676;--cyan:#00e5ff;
      --dark:#070c07;--card:#0e160e;--card2:#0b120b;
      --bdr:#1b2e1b;--txt:#dde8dd;--muted:#4a6050;
    }
    body{
      font-family:'Inter',sans-serif;
      background:var(--dark);
      color:var(--txt);
      min-height:100vh;
      display:flex;flex-direction:column;align-items:center;
      padding:28px 16px 60px;
      background-image:
        radial-gradient(ellipse at 10% 10%,rgba(37,211,102,.07) 0%,transparent 50%),
        radial-gradient(ellipse at 90% 90%,rgba(0,229,118,.05) 0%,transparent 50%);
    }

    /* â”€â”€ TOPBAR â”€â”€ */
    .topbar{
      width:100%;max-width:480px;
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:28px;
    }
    .topbar-left{display:flex;align-items:center;gap:11px}
    .t-logo{
      width:42px;height:42px;
      background:linear-gradient(135deg,#162716,#0b1a0b);
      border:1.5px solid var(--g);border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      font-size:20px;box-shadow:0 0 16px rgba(37,211,102,.2);
    }
    .t-name{font-size:17px;font-weight:900;background:linear-gradient(90deg,var(--g),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .t-badge{font-size:10px;font-weight:700;color:var(--g);background:rgba(37,211,102,.1);border:1px solid rgba(37,211,102,.25);padding:5px 12px;border-radius:20px;letter-spacing:1.2px}

    /* â”€â”€ CARD â”€â”€ */
    .card{
      background:var(--card);border:1px solid var(--bdr);
      border-radius:24px;padding:30px 28px;
      width:100%;max-width:480px;
      box-shadow:0 0 60px rgba(37,211,102,.05),0 28px 72px rgba(0,0,0,.7);
      position:relative;overflow:hidden;
      margin-bottom:16px;
    }
    .card::before{
      content:'';position:absolute;top:0;left:0;right:0;height:2px;
      background:linear-gradient(90deg,transparent,var(--g),var(--cyan),var(--g2),transparent);
    }

    /* â”€â”€ TABS â”€â”€ */
    .tabs{display:flex;background:var(--card2);border-radius:16px;padding:5px;margin-bottom:28px;border:1px solid var(--bdr);gap:5px}
    .tab{flex:1;padding:12px 8px;text-align:center;border-radius:12px;cursor:pointer;font-size:13px;font-weight:700;color:var(--muted);transition:all .25s;user-select:none;letter-spacing:.3px}
    .tab.active{background:linear-gradient(135deg,#1a5c32,var(--g));color:#fff;box-shadow:0 4px 16px rgba(37,211,102,.3)}

    /* â”€â”€ LABEL â”€â”€ */
    .lbl{font-size:11px;color:var(--muted);margin-bottom:9px;letter-spacing:1.8px;text-transform:uppercase;font-weight:600}

    /* â”€â”€ INPUT â”€â”€ */
    .iw{position:relative;margin-bottom:16px}
    .iw .ico{position:absolute;left:15px;top:50%;transform:translateY(-50%);font-size:18px}
    input[type=text]{
      width:100%;padding:15px 15px 15px 46px;
      background:var(--card2);border:1.5px solid var(--bdr);
      border-radius:14px;color:var(--txt);
      font-size:15px;font-family:'JetBrains Mono',monospace;
      outline:none;transition:border-color .2s,box-shadow .2s;
    }
    input[type=text]:focus{border-color:var(--g);box-shadow:0 0 0 3px rgba(37,211,102,.1)}
    input::placeholder{color:#1e301e}

    /* â”€â”€ BUTTONS â”€â”€ */
    .btn{
      width:100%;padding:16px;
      background:linear-gradient(135deg,#1a5c32,var(--g));
      border:none;border-radius:14px;color:#fff;
      font-size:15px;font-weight:800;cursor:pointer;
      transition:all .22s;display:flex;align-items:center;justify-content:center;gap:9px;
      letter-spacing:.4px;
    }
    .btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 28px rgba(37,211,102,.4)}
    .btn:active:not(:disabled){transform:translateY(0)}
    .btn:disabled{opacity:.4;cursor:not-allowed;transform:none}
    .btn-ghost{
      width:100%;padding:14px;background:transparent;
      border:1.5px solid var(--bdr);border-radius:14px;
      color:var(--txt);font-size:14px;font-weight:600;cursor:pointer;
      transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px;
      margin-top:10px;
    }
    .btn-ghost:hover{border-color:var(--g);color:var(--g)}

    /* â”€â”€ CODE BOX â”€â”€ */
    .codebox{
      background:var(--card2);border:1.5px solid var(--bdr);
      border-radius:14px;padding:24px;text-align:center;
      margin:16px 0;min-height:80px;
      display:flex;align-items:center;justify-content:center;flex-direction:column;gap:7px;
    }
    .code-val{font-family:'JetBrains Mono',monospace;font-size:32px;font-weight:800;color:var(--cyan);letter-spacing:6px;text-shadow:0 0 28px rgba(0,229,255,.35)}
    .code-hint{font-size:11px;color:var(--muted);margin-top:4px}
    .code-ph{font-size:13px;color:#1e301e}

    /* â”€â”€ QR BOX â”€â”€ */
    .qrbox{
      background:var(--card2);border:1.5px solid var(--bdr);
      border-radius:14px;padding:28px;text-align:center;
      margin:16px 0;min-height:300px;
      display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;
    }
    .qrbox img{border-radius:14px;max-width:240px;width:100%;border:4px solid #fff;box-shadow:0 8px 32px rgba(0,0,0,.5)}
    .qr-ph{font-size:13px;color:#1e301e}
    .qr-hint{font-size:12px;color:var(--muted)}
    .spinner{width:40px;height:40px;border:3px solid var(--bdr);border-top-color:var(--g);border-radius:50%;animation:spin .75s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* â”€â”€ STATUS â”€â”€ */
    .status{margin-top:14px;padding:12px 16px;border-radius:12px;font-size:13px;font-weight:600;display:none;align-items:center;gap:9px;line-height:1.5}
    .status.show{display:flex}
    .status.loading{background:rgba(255,168,0,.07);border:1px solid rgba(255,168,0,.2);color:#ffaa00}
    .status.success{background:rgba(37,211,102,.07);border:1px solid rgba(37,211,102,.2);color:var(--g)}
    .status.error{background:rgba(255,65,65,.07);border:1px solid rgba(255,65,65,.2);color:#ff4545}
    .status.info{background:rgba(0,229,255,.05);border:1px solid rgba(0,229,255,.15);color:var(--cyan)}
    .dots{display:inline-flex;gap:3px}
    .dots span{width:5px;height:5px;background:currentColor;border-radius:50%;animation:db 1.2s infinite}
    .dots span:nth-child(2){animation-delay:.2s}.dots span:nth-child(3){animation-delay:.4s}
    @keyframes db{0%,80%,100%{transform:scale(.5);opacity:.3}40%{transform:scale(1);opacity:1}}

    /* â”€â”€ STEPS â”€â”€ */
    .steps{margin-top:22px;padding-top:20px;border-top:1px solid var(--bdr)}
    .s-title{font-size:10px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;font-weight:700;margin-bottom:14px}
    .step{display:flex;align-items:flex-start;gap:11px;margin-bottom:11px;font-size:13px;color:#5a7a62;line-height:1.6}
    .sn{width:22px;height:22px;min-width:22px;background:#142014;border:1px solid #1e3320;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:800;color:var(--g);margin-top:2px}
    .step b{color:var(--g)}

    /* â”€â”€ CONTACT CARD â”€â”€ */
    .ccard{
      background:var(--card);border:1px solid var(--bdr);
      border-radius:24px;padding:26px 28px;
      width:100%;max-width:480px;
      box-shadow:0 12px 40px rgba(0,0,0,.5);
      margin-bottom:16px;
    }
    .cc-title{font-size:10px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;font-weight:700;margin-bottom:16px}
    .links{display:flex;flex-direction:column;gap:10px}
    .link-item{
      display:flex;align-items:center;gap:14px;padding:14px 16px;
      background:var(--card2);border:1px solid var(--bdr);
      border-radius:14px;text-decoration:none;color:var(--txt);
      font-size:14px;font-weight:500;transition:all .22s;
    }
    .link-item:hover{border-color:var(--g);color:var(--g);transform:translateX(4px);background:#0e1a0e}
    .link-ic{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
    .link-info{flex:1}
    .link-name{font-size:14px;font-weight:700;margin-bottom:2px}
    .link-sub{font-size:11px;color:var(--muted)}
    .link-arr{color:var(--muted);font-size:18px;font-weight:300}

    /* â”€â”€ FOOTER â”€â”€ */
    .footer{font-size:11px;color:#1a2e1a;text-align:center;margin-top:8px}
    .footer span{color:var(--g)}
  </style>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
  <div class="topbar-left">
    <div class="t-logo">ğŸ¤–</div>
    <div class="t-name">IMRAN BOT</div>
  </div>
  <div class="t-badge">ğŸŸ¢ ONLINE</div>
</div>

<!-- MAIN CARD -->
<div class="card">
  <div class="tabs">
    <div class="tab active" id="tPair" onclick="sw('pair')">ğŸ”‘ Pair Code</div>
    <div class="tab"        id="tQR"   onclick="sw('qr')">ğŸ“· QR Scanner</div>
  </div>

  <!-- â•â•â• PAIR CODE SECTION â•â•â• -->
  <div id="sPair">
    <div class="lbl">WhatsApp Number</div>
    <div class="iw">
      <span class="ico">ğŸ“±</span>
      <input type="text" id="phone" placeholder="8801XXXXXXXXX" maxlength="15"
             onkeydown="if(event.key==='Enter') genCode()"/>
    </div>
    <button class="btn" id="bGen" onclick="genCode()">ğŸ”‘ Generate Pair Code</button>

    <div class="codebox" id="codeBox">
      <div class="code-ph">Your pair code will appear here</div>
    </div>
    <button class="btn-ghost" id="bCopy" onclick="cpCode()" style="display:none">ğŸ“‹ Copy Code</button>

    <div class="status" id="pStat">
      <div class="dots"><span></span><span></span><span></span></div>
      <span id="pTxt"></span>
    </div>

    <div class="steps">
      <div class="s-title">How to use</div>
      <div class="step"><div class="sn">1</div><span>Enter your number with country code (e.g. <b>880</b>1XXXXXXXXX)</span></div>
      <div class="step"><div class="sn">2</div><span>Click <b>Generate</b> and copy the 8-digit code</span></div>
      <div class="step"><div class="sn">3</div><span>WhatsApp â†’ <b>Linked Devices</b> â†’ Link with Phone Number</span></div>
      <div class="step"><div class="sn">4</div><span><b>creds.json</b> file automatically sent to your WhatsApp ğŸ‰</span></div>
    </div>
  </div>

  <!-- â•â•â• QR SECTION â•â•â• -->
  <div id="sQR" style="display:none">
    <div class="qrbox" id="qrBox">
      <div class="qr-ph">Click the button below to generate QR</div>
    </div>
    <button class="btn" id="bQR" onclick="startQR()">ğŸ“· Generate QR Code</button>

    <div class="status" id="qStat">
      <div class="dots"><span></span><span></span><span></span></div>
      <span id="qTxt"></span>
    </div>

    <div class="steps">
      <div class="s-title">How to use</div>
      <div class="step"><div class="sn">1</div><span>Click <b>Generate QR Code</b></span></div>
      <div class="step"><div class="sn">2</div><span>WhatsApp â†’ <b>Linked Devices</b> â†’ Link a Device</span></div>
      <div class="step"><div class="sn">3</div><span>Scan the QR code with your phone camera</span></div>
      <div class="step"><div class="sn">4</div><span><b>creds.json</b> file automatically sent to your WhatsApp ğŸ‰</span></div>
    </div>
  </div>
</div>

<!-- CONTACT CARD -->
<div class="ccard">
  <div class="cc-title">ğŸ“ Contact & Support</div>
  <div class="links">
    <a class="link-item" href="https://wa.me/+8801689903267" target="_blank">
      <div class="link-ic" style="background:rgba(37,211,102,.12)">ğŸ’¬</div>
      <div class="link-info">
        <div class="link-name">WhatsApp</div>
        <div class="link-sub">+880 1689-903267</div>
      </div>
      <div class="link-arr">â€º</div>
    </a>
    <a class="link-item" href="https://facebook.com/Imran.Ahmed099" target="_blank">
      <div class="link-ic" style="background:rgba(24,119,242,.12)">ğŸ“˜</div>
      <div class="link-info">
        <div class="link-name">Facebook</div>
        <div class="link-sub">fb.com/Imran.Ahmed099</div>
      </div>
      <div class="link-arr">â€º</div>
    </a>
    <a class="link-item" href="https://youtube.com/@YOUR_CHANNEL" target="_blank">
      <div class="link-ic" style="background:rgba(255,0,0,.1)">â–¶ï¸</div>
      <div class="link-info">
        <div class="link-name">YouTube</div>
        <div class="link-sub">Tutorials & Updates</div>
      </div>
      <div class="link-arr">â€º</div>
    </a>
    <a class="link-item" href="https://github.com/YOUR_USERNAME" target="_blank">
      <div class="link-ic" style="background:rgba(255,255,255,.05)">ğŸ™</div>
      <div class="link-info">
        <div class="link-name">GitHub</div>
        <div class="link-sub">Source Code & Issues</div>
      </div>
      <div class="link-arr">â€º</div>
    </a>
  </div>
</div>

<div class="footer">Â© 2025 <span>IMRAN BOT</span> â€” Pro Linker</div>

<script>
  let curCode = "";

  // â”€â”€ Tab switch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function sw(tab) {
    ["Pair","QR"].forEach(t => {
      document.getElementById("t"+t).classList.toggle("active", tab === t.toLowerCase());
      document.getElementById("s"+t).style.display = tab === t.toLowerCase() ? "block" : "none";
    });
  }

  // â”€â”€ Status helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setStat(pfx, type, msg) {
    const box = document.getElementById(pfx+"Stat");
    const txt = document.getElementById(pfx+"Txt");
    box.className = "status show " + type;
    txt.textContent = msg;
    const d = box.querySelector(".dots");
    if (d) d.style.display = type === "loading" ? "inline-flex" : "none";
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //   PAIR CODE
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  async function genCode() {
    const phone = document.getElementById("phone").value.replace(/[^0-9]/g, "");
    if (phone.length < 10) { setStat("p", "error", "âŒ Enter a valid phone number"); return; }

    const btn = document.getElementById("bGen");
    btn.disabled = true;
    btn.textContent = "â³ Generating...";
    document.getElementById("codeBox").innerHTML = '<div class="code-ph">Connecting to WhatsApp...</div>';
    document.getElementById("bCopy").style.display = "none";
    curCode = "";
    setStat("p", "loading", "Connecting to WhatsApp...");

    try {
      const res  = await fetch("/pair?number=" + phone);
      const data = await res.json();

      if (data.code) {
        curCode = data.code;
        document.getElementById("codeBox").innerHTML =
          '<div class="code-val">' + data.code + '</div>' +
          '<div class="code-hint">WhatsApp â†’ Linked Devices â†’ Link with Phone Number</div>';
        document.getElementById("bCopy").style.display = "flex";
        setStat("p", "info", "â„¹ï¸ Enter this code in WhatsApp. creds.json will be sent automatically!");
      } else {
        setStat("p", "error", "âŒ " + (data.error || "Failed. Try again."));
        document.getElementById("codeBox").innerHTML = '<div class="code-ph">Your pair code will appear here</div>';
      }
    } catch {
      setStat("p", "error", "âŒ Server error. Try again.");
    }

    btn.disabled = false;
    btn.innerHTML = "ğŸ”‘ Generate Pair Code";
  }

  function cpCode() {
    if (!curCode) return;
    navigator.clipboard.writeText(curCode).then(() => {
      const b = document.getElementById("bCopy");
      const orig = b.innerHTML;
      b.innerHTML = "âœ… Copied!";
      setTimeout(() => { b.innerHTML = orig; }, 2000);
    });
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //   QR SCANNER
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  async function startQR() {
    const btn = document.getElementById("bQR");
    btn.disabled = true;
    btn.textContent = "â³ Starting...";
    document.getElementById("qrBox").innerHTML = '<div class="spinner"></div><div class="qr-hint">Generating QR code...</div>';
    setStat("q", "loading", "Connecting to WhatsApp...");

    try {
      const res  = await fetch("/qr");
      const data = await res.json();

      if (data.qr) {
        document.getElementById("qrBox").innerHTML =
          '<img src="' + data.qr + '" alt="QR Code"/>' +
          '<div class="qr-hint">ğŸ“± Scan with WhatsApp â†’ Linked Devices</div>';
        setStat("q", "info", "â„¹ï¸ Scan the QR code. creds.json will be sent automatically!");
      } else {
        setStat("q", "error", "âŒ " + (data.error || "Failed. Try again."));
        document.getElementById("qrBox").innerHTML = '<div class="qr-ph">Click the button below to generate QR</div>';
      }
    } catch {
      setStat("q", "error", "âŒ Server error. Try again.");
      document.getElementById("qrBox").innerHTML = '<div class="qr-ph">Click the button below to generate QR</div>';
    }

    btn.disabled = false;
    btn.innerHTML = "ğŸ“· Generate QR Code";
  }
</script>
</body>
</html>
